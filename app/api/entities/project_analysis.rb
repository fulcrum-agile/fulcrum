class Entities::ProjectAnalysis < Entities::BaseEntity
  expose :velocity
  expose :volatility
  expose :current_iteration_number
  expose :current_iteration_date
  expose :next_iteration_date
  expose :iteration_length
  expose :backlog
  expose :backlog_iterations
  expose :current_iteration_details
  expose :backlog_date
  expose :worst_backlog_date

  private

  def next_iteration_date
    last_iteration_number = object.current_iteration_number + 1

    object.date_for_iteration_number(last_iteration_number)
  end

  def current_iteration_date
    object.date_for_iteration_number(object.current_iteration_number)
  end

  def worst_backlog_date
    object.backlog_date(true)
  end
end
